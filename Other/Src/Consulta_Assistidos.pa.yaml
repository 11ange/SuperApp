# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Consulta_Assistidos:
    Properties:
      Fill: =RGBA(232, 232, 232, 1)
      LoadingSpinnerColor: =RGBA(0, 51, 102, 1)
      OnVisible: |+
        =Refresh(Assistências_Encerradas)
    Children:
      - RectQuickActionBar_Tela_Consulta_Assistidos:
          Control: Rectangle@2.3.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Fill: =RGBA(0, 51, 102, 1)
            Height: =88
            Width: =Parent.Width
      - Gallery1:
          Control: Gallery@2.15.0
          Variant: BrowseLayout_Vertical_TwoTextVariant_ver5.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Height: =Parent.Height - Self.Y
            Items: |-
              =SortByColumns(
                  Filter(Assistências_Encerradas, 'ID Pessoa' = PessoaSelecionada),
                  "cr4f5_dataentrevista",
                  SortOrder.Descending
              )
            OnSelect: |-
              =Set(EntrevistaHistorico, ThisItem.'ID Assistência');

              Patch(
                  Logs,
                  Defaults(Logs),
                  {
                      DataeHora: Now(),
                      DeviceID: DeviceID,
                      Ação: "Visualizando Entrevista Encerrada: " & EntrevistaHistorico & " - Pessoa ID: " & PessoaSelecionada
                  }
              );

              Navigate(Consulta_Entrevista_Finalizada, ScreenTransition.None)
            Width: =Parent.Width
            Y: =Lbl_Assistencias_Encerradas.Y + Lbl_Assistencias_Encerradas.Height + 10
          Children:
            - Title5:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Color: =RGBA(50, 49, 48, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                  Height: =Self.Size * 1.8
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =18
                  Text: |-
                    =Concatenate(Text(ThisItem.'Data Entrevista', "dd-mmm-yyyy", "pt-br"),"  -  ",Proper(Text(ThisItem.'Data Entrevista',"ddd")))
                    //ThisItem.'Data Entrevista'
                  VerticalAlign: =VerticalAlign.Top
                  Width: =Parent.TemplateWidth - 86
                  X: =16
                  Y: =(Parent.TemplateHeight - (Self.Size * 1.8 + Subtitle4.Size * 1.8)) / 2
            - Subtitle4:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                  Height: =Self.Size * 1.8
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =16
                  Text: =Concatenate(ThisItem.Assistência, " - ", ThisItem.Entrevistador)
                  VerticalAlign: =VerticalAlign.Top
                  Width: =Title5.Width
                  X: =Title5.X
                  Y: =Title5.Y + Title5.Height
            - NextArrow8:
                Control: Classic/Icon@2.5.0
                Properties:
                  AccessibleLabel: =Self.Tooltip
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Color: =RGBA(166, 166, 166, 1)
                  Height: =50
                  Icon: =Icon.ChevronRight
                  OnSelect: =Select(Parent)
                  PaddingBottom: =16
                  PaddingLeft: =16
                  PaddingRight: =16
                  PaddingTop: =16
                  Tooltip: ="Exibir detalhes do item"
                  Width: =50
                  X: =Parent.TemplateWidth - Self.Width - 12
                  Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
            - Separator13:
                Control: Rectangle@2.3.0
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Fill: =RGBA(255, 255, 255, 1)
                  Height: =8
                  OnSelect: =Select(Parent)
                  Width: =Parent.TemplateWidth
                  Y: =Parent.TemplateHeight - Self.Height
            - Rectangle9:
                Control: Rectangle@2.3.0
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Fill: =RGBA(0, 89, 178, 1)
                  Height: =Parent.TemplateHeight - Separator13.Height
                  OnSelect: =Select(Parent)
                  Visible: =ThisItem.IsSelected
                  Width: =4
      - Icone_Voltar_Tela_Consulta_Assistidos:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            Height: =88
            Icon: =Icon.BackArrow
            OnSelect: |-
              =UpdateContext({ MostraPopUp: false });
              //Set(PessoaSelecionada;0);;
              //Set(PessoaSelecionada; Blank());;
              Navigate(Busca_Assistidos, ScreenTransition.None)
            PaddingBottom: =24
            PaddingLeft: =24
            PaddingRight: =24
            PaddingTop: =24
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: ="Back to list"
            Width: =88
      - Icone_Edita_Assisitido:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            DisplayMode: =If(DataSourceInfo([@Pessoas], DataSourceInfo.EditPermission), DisplayMode.Edit, DisplayMode.Disabled)
            Height: =88
            Icon: =Icon.Edit
            OnSelect: |-
              =EditForm(Form_Edita_Assistidos);

              Set(CriaAssistido, false);

              Navigate(Edita_Assistidos, ScreenTransition.None)
            PaddingBottom: =24
            PaddingLeft: =24
            PaddingRight: =24
            PaddingTop: =24
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: ="Edit this item"
            Width: =88
            X: =Parent.Width - Self.Width
      - Icone_Apaga_Assistido:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            DisplayMode: =If(DataSourceInfo([@Pessoas], DataSourceInfo.EditPermission), DisplayMode.Edit, DisplayMode.Disabled)
            Height: =88
            Icon: =Icon.Trash
            OnSelect: |-
              =UpdateContext({ MostraPopUp: true })
            PaddingBottom: =24
            PaddingLeft: =24
            PaddingRight: =24
            PaddingTop: =24
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: ="Delete this item"
            Width: =88
            X: =Parent.Width - Icone_Edita_Assisitido.Width - Self.Width
      - Lbl_Titulo_Consulta_Assistido:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 0, 0, 1)
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.'Open Sans'
            Height: =88
            Size: =27
            Text: ="Consulta Assistido"
            Width: =Parent.Width - Self.X - Icone_Apaga_Assistido.Width - Icone_Edita_Assisitido.Width
            Wrap: =false
            X: =80
      - Form_Detalha_Assistido:
          Control: FormViewer@2.3.4
          Layout: Vertical
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            DataSource: =Pessoas
            Height: ='Ultima Assistência_DataCard2'.Y + 'Ultima Assistência_DataCard2'.Height
            Item: =LookUp(Pessoas, 'ID Pessoa' = PessoaSelecionada)
            Width: =Parent.Width
            Y: =92
          Children:
            - ID_Pessoa_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  DataField: ="cre47_idpessoa"
                  Default: =ThisItem.'ID Pessoa'
                  DisplayName: =DataSourceInfo([@Pessoas],DataSourceInfo.DisplayName,'ID Pessoa')
                  Height: =100
                  Required: =false
                  Width: =Parent.Width
                  X: =0
                  Y: =0
                Children:
                  - DataCardKey3:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        Align: =Align.Center
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 89, 178, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Height: =45
                        Text: ="Número do Assistido"
                        Width: =Parent.Width
                        Wrap: =false
                        Y: =10
                  - DataCardValue3:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        Align: =Align.Center
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 89, 178, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Height: =40
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: =Int(Parent.Default)
                        Width: =Parent.Width
                        Y: =DataCardKey3.Y + DataCardKey3.Height
                  - Borda Texto Numero Assistido:
                      Control: Classic/Button@2.2.0
                      Properties:
                        BorderColor: |-
                          =//ColorFade(Self.Fill; -15%)
                          RGBA(0, 89, 178, 1)
                        BorderThickness: =3
                        Color: =RGBA(255, 255, 255, 1)
                        DisabledBorderColor: =RGBA(166, 166, 166, 1)
                        Fill: =RGBA(0, 0, 0, 0)
                        Font: =Font.'Open Sans'
                        Height: =ID_Pessoa_DataCard1.Height - 4
                        HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                        HoverColor: =RGBA(255, 255, 255, 1)
                        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
                        PressedBorderColor: =Self.Fill
                        PressedColor: =Self.Fill
                        PressedFill: =Self.Color
                        Text: =
                        Width: =Parent.Width * 0.5
                        X: =Parent.Width/2 - Self.Width/2
                        Y: =2
            - Nome_Pessoa_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  DataField: ="cr4f5_nomepessoa"
                  Default: =ThisItem.'Nome Pessoa'
                  DisplayName: =DataSourceInfo([@Pessoas],DataSourceInfo.DisplayName,'Nome Pessoa')
                  Height: =90
                  Required: =true
                  Width: =Parent.Width
                  X: =0
                  Y: =1
                Children:
                  - DataCardKey1:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 89, 178, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Height: =48
                        Text: ="Nome do Assistido"
                        Width: =Parent.Width - Self.X
                        Wrap: =false
                        X: =30
                        Y: =10
                  - DataCardValue1:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 89, 178, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Open Sans'
                        Height: =40
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =19
                        Text: =Parent.Default
                        Width: =Parent.Width - Self.X
                        X: =60
                        Y: =DataCardKey1.Y + DataCardKey1.Height + 5
            - Nome_Social_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  DataField: ="cr4f5_nomesocial"
                  Default: =ThisItem.'Nome Social'
                  DisplayName: =DataSourceInfo([@Pessoas],DataSourceInfo.DisplayName,'Nome Social')
                  Height: =90
                  Required: =false
                  Width: =Parent.Width
                  X: =0
                  Y: =2
                Children:
                  - DataCardKey20:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 89, 178, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Height: =48
                        Text: ="Nome Social"
                        Width: =Parent.Width - Self.X
                        Wrap: =false
                        X: =30
                        Y: =10
                  - DataCardValue20:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 89, 178, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Open Sans'
                        Height: =40
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =19
                        Text: =Parent.Default
                        Width: =Parent.Width - Self.X
                        X: =60
                        Y: =DataCardKey20.Y + DataCardKey20.Height + 5
            - Idade_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  DataField: ="cr4f5_idade"
                  Default: =ThisItem.Idade
                  DisplayName: =DataSourceInfo([@Pessoas],DataSourceInfo.DisplayName,Idade)
                  Height: =90
                  Required: =true
                  Width: =Parent.Width
                  X: =0
                  Y: =3
                Children:
                  - DataCardKey54:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 89, 178, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Height: =48
                        Text: =Parent.DisplayName
                        Width: =Parent.Width - Self.X
                        Wrap: =false
                        X: =30
                        Y: =10
                  - DataCardValue47:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 89, 178, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Open Sans'
                        Height: =40
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =19
                        Text: =Parent.Default
                        Width: =Parent.Width - Self.X
                        X: =60
                        Y: =DataCardKey54.Y + DataCardKey54.Height + 5
            - ConhDoutrina_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  DataField: ="cr4f5_conhdoutrina"
                  Default: =ThisItem.ConhDoutrina
                  DisplayName: =DataSourceInfo([@Pessoas],DataSourceInfo.DisplayName,ConhDoutrina)
                  Height: =90
                  Required: =true
                  Width: =720
                  X: =0
                  Y: =4
                Children:
                  - DataCardKey147:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 89, 178, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Height: =48
                        Text: ="Conhecimento da doutrina" //Parent.DisplayName
                        Width: =Parent.Width - 60
                        Wrap: =false
                        X: =30
                        Y: =10
                  - DataCardValue135:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 89, 178, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Open Sans'
                        Height: =40
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =19
                        Text: =Parent.Default
                        Width: =Parent.Width - 60
                        X: =60
                        Y: =DataCardKey147.Y + DataCardKey147.Height + 5
            - Número Cartão_DataCard1:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  DataField: ="cr4f5_numerocartao"
                  Default: =ThisItem.'Número Cartão'
                  DisplayName: ="Número QRCODE"//DataSourceInfo([@Pessoas],DataSourceInfo.DisplayName,'Número Cartão')
                  Height: =90
                  Required: =false
                  Width: =720
                  X: =0
                  Y: =5
                Children:
                  - DataCardKey8:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 89, 178, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Height: =48
                        Text: =Parent.DisplayName
                        Width: =Parent.Width - 60
                        Wrap: =false
                        X: =30
                        Y: =10
                  - DataCardValue8:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 89, 178, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Open Sans'
                        Height: =40
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: =Parent.Default
                        Width: =Parent.Width - 60
                        X: =60
                        Y: =DataCardKey8.Y + DataCardKey8.Height + 5
            - Ultima Assistência_DataCard2:
                Control: TypedDataCard@1.0.7
                Variant: ClassicTextualView
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  DataField: ="cr4f5_ultimaassistencia"
                  Default: =ThisItem.'Ultima Assistência'
                  DisplayName: =DataSourceInfo([@Pessoas],DataSourceInfo.DisplayName,'Ultima Assistência')
                  Required: =false
                  Width: =720
                  X: =0
                  Y: =6
                Children:
                  - DataCardKey58:
                      Control: Label@2.5.1
                      MetadataKey: FieldName
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(0, 89, 178, 1)
                        Font: =Font.'Open Sans'
                        FontWeight: =FontWeight.Bold
                        Height: =48
                        Text: =Parent.DisplayName
                        Width: =Parent.Width - 60
                        Wrap: =false
                        X: =30
                        Y: =10
                  - DataCardValue46:
                      Control: Label@2.5.1
                      MetadataKey: FieldValue
                      Properties:
                        AutoHeight: =true
                        BorderColor: =RGBA(0, 89, 178, 1)
                        DisplayMode: =Parent.DisplayMode
                        Font: =Font.'Open Sans'
                        Height: =40
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Text: |-
                          =Concatenate(Text(ThisItem.'Ultima Assistência', "dd-mmm-yyyy", "pt-br")," - ",Proper(Text(ThisItem.'Ultima Assistência',"ddd")))
                          //Parent.Default
                        Width: =Parent.Width - 60
                        X: =60
                        Y: =DataCardKey58.Y + DataCardKey58.Height + 5
      - Btn_Cadastra_Assistencia:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(0, 51, 102, 1)
            FocusedBorderColor: =ColorFade(Self.Fill, -75%)
            Font: =Font.'Open Sans'
            Height: =90
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            OnSelect: |-
              =Patch(
                  Logs,
                  Defaults(Logs),
                  {
                      DataeHora: Now(),
                      DeviceID: DeviceID,
                      Ação: "Criando entrevista para o Assistido ID:" & PessoaSelecionada
                  }
              );
              ResetForm(Form_Cria_Entrevista);
              NewForm(Form_Cria_Entrevista);
              //Set(EntrevistaNova; true);;
              Navigate(
                  Criacao_Entrevista_Assistido,
                  ScreenTransition.None
              )
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="Cadastra Assistência"
            Visible: |-
              =If(And("Sem" in lbl_Aviso.Text, "Não" in Lbl_Dialogo_Pendente.Text,IsEmpty(Filter(Assistências, 'ID Pessoa' = PessoaSelecionada))), true, false)
              //If(And("Sem" in lbl_Aviso.Text; "Não" in Lbl_Dialogo_Pendente.Text); true; false)
            X: =Parent.Width/2 - Self.Width/2
            Y: =lbl_Aviso.Y + lbl_Aviso.Height + 30
      - lbl_Aviso:
          Control: Label@2.5.1
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =If("Sem" in Self.Text,Color.WhiteSmoke,Color.Yellow)
            Fill: =If("Sem" in Self.Text,Color.Green,Color.Red)
            Font: =Font.'Open Sans'
            FontWeight: =If("Sem" in Self.Text,FontWeight.Normal, FontWeight.Bold)
            OnSelect: |-
              =Set(AssistenciaSelecionada, LookUp(Assistências, 'ID Pessoa' = PessoaSelecionada).'ID Assistência');
              //Set(PresencaSelecionada, PessoaSelecionada);

              If("Não" in Lbl_Dialogo_Pendente.Text && "Com" in lbl_Aviso.Text,
                  Navigate(Controle_Presença, ScreenTransition.None)
              );
            Text: |-
              =If(
                  (CountIf(Assistências, ('ID Pessoa'=PessoaSelecionada) && (Finalizada="Não")))>0,
                  "Com Assistência em Andamento",
                  "Sem Assistência em Andamento"
              )
            X: =Parent.Width/2 - Self.Width/2
            Y: =Lbl_Dialogo_Pendente.Y + Lbl_Dialogo_Pendente.Height + 20
      - Fundo_Popup_Apaga_Assistido:
          Control: Rectangle@2.3.0
          Group: Popup_Apaga_Assistido
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Fill: =RGBA(100, 118, 132, 0.6)
            Height: = Parent.Height - Lbl_Titulo_Consulta_Assistido.Height
            Visible: =MostraPopUp
            Width: =Parent.Width
            Y: =88
      - Popup_Assistido:
          Control: Rectangle@2.3.0
          Group: Popup_Apaga_Assistido
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Fill: =Color.White
            Height: =281
            Visible: =MostraPopUp
            Width: =464
            X: =Parent.Width/2 - Self.Width/2
            Y: =360
      - lbl_Aviso_popup_Assistido:
          Control: Label@2.5.1
          Group: Popup_Apaga_Assistido
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            Fill: =Color.Red
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =72
            Text: ="Aviso"
            Visible: =MostraPopUp
            Width: =464
            X: =Parent.Width/2 - Self.Width/2
            Y: =360
      - lbl_Texto_popup_Assistido:
          Control: Label@2.5.1
          Group: Popup_Apaga_Assistido
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 89, 178, 1)
            Font: =Font.'Open Sans'
            Height: =84
            Text: ="Deseja realmente apagar este assistido?"
            Visible: =MostraPopUp
            Width: =464
            X: =Parent.Width/2 - Self.Width/2
            Y: =437
      - Btn_Cancela_Exclusao_Assistido:
          Control: Classic/Button@2.2.0
          Group: Popup_Apaga_Assistido
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(0, 51, 102, 1)
            FocusedBorderColor: =ColorFade(Self.Fill, -75%)
            Font: =Font.'Open Sans'
            Height: =55
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            OnSelect: |-
              =UpdateContext({ MostraPopUp: false })
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="Não"
            Visible: =MostraPopUp
            Width: =157
            X: =Popup_Assistido.X + Parent.Width/6 - Self.Width/2
            Y: =553
      - Btn_Confirma_Exclusao_Assistido:
          Control: Classic/Button@2.2.0
          Group: Popup_Apaga_Assistido
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(0, 51, 102, 1)
            FocusedBorderColor: =ColorFade(Self.Fill, -75%)
            Font: =Font.'Open Sans'
            Height: =55
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            OnSelect: |-
              =Remove(
                  [@Pessoas],
                  LookUp(
                      Pessoas,
                      'ID Pessoa' = PessoaSelecionada
                  )
              );

              Patch(
                  Logs,
                  Defaults(Logs),
                  {
                      DataeHora: Now(),
                      DeviceID: DeviceID,
                      Ação: "Apagando Pessoa ID:" & PessoaSelecionada
                  }
              );

              UpdateContext({MostraPopUp: false});
              If(
                  IsEmpty(
                      Errors(
                          [@Pessoas],
                          LookUp(
                              Pessoas,
                              'ID Pessoa' = PessoaSelecionada
                          )
                      )
                  ),
                  Back()
              )
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="Sim"
            Visible: =MostraPopUp
            Width: =157
            X: =Popup_Assistido.X + (Parent.Width/6)*3 - Self.Width/2
            Y: =553
      - Lbl_Dialogo_Pendente:
          Control: Label@2.5.1
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: |-
              =//RGBA(0; 0; 0; 1)
              If("Sim" in Self.Text,Color.Yellow,Color.Black)
            Fill: |-
              =//RGBA(0; 0; 0; 0)
              If("Sim" in Self.Text,Color.Red,Color.Transparent)
            Font: =Font.'Open Sans'
            FontWeight: =If("Sim" in Self.Text,FontWeight.Bold, FontWeight.Normal)
            OnSelect: |+
              =Set(AssistenciaSelecionada, Blank());

              Set(
                  AssistenciaSelecionada,
                  LookUp(
                      Assistências,
                      IsBlank('Data Diálogo') && Finalizada = "Sim" && 'ID Pessoa' = Value(PessoaSelecionada),
                      'ID Assistência'
                  )
              );

              If(!IsBlank(AssistenciaSelecionada),
                  Navigate(Infos_Entrevista_Dialogo, ScreenTransition.None)
              );
            Text: |+
              =If(
                  !IsBlank(
                      LookUp(
                          Assistências,
                          IsBlank('Data Diálogo') && Finalizada = "Sim" && 'ID Pessoa' = PessoaSelecionada,
                          'ID Assistência'
                      )
                  ),
                  "Diálogo Pendente? Sim",
                  "Diálogo Pendente? Não"
              )
            Width: =400
            X: =Parent.Width/2 - Self.Width/2
            Y: =Form_Detalha_Assistido.Y + Form_Detalha_Assistido.Height + 20
      - Lbl_Assistencias_Encerradas:
          Control: Label@2.5.1
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(0, 89, 178, 1)
            DisplayMode: =DisplayMode.View
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =50
            Size: =24
            Text: ="Assistências Encerradas:"
            Width: =500
            X: =Parent.Width/2 - Self.Width/2
            Y: =Btn_Cadastra_Assistencia.Y + Btn_Cadastra_Assistencia.Height + 10
