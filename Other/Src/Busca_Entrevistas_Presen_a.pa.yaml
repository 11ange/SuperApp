# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Busca_Entrevistas_Presença:
    Properties:
      Fill: =RGBA(232, 232, 232, 1)
      LoadingSpinnerColor: =RGBA(0, 51, 102, 1)
      OnVisible: |-
        =Refresh(Assistências);

        Reset(Campo_Busca_Entrevista_Presença)
    Children:
      - RectQuickActionBar1:
          Control: Rectangle@2.3.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Fill: =RGBA(0, 51, 102, 1)
            Height: =88
            Width: =Parent.Width
      - Galeria_Busca_Entrevista_Presença:
          Control: Gallery@2.15.0
          Variant: BrowseLayout_Vertical_TwoTextVariant_ver5.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Height: =1202
            Items: |-
              =SortByColumns(
                  Filter(
                      Assistências,
                      IsBlank(Campo_Busca_Entrevista_Presença.Text) Or StartsWith('ID Pessoa Texto', Campo_Busca_Entrevista_Presença.Text)
                  ),
                  "cr4f5_idpessoa",
                  If(Sort_Presenca, SortOrder.Descending, SortOrder.Ascending)
              )
              /*
              SortByColumns(
                  Filter(
                      Assistências,
                      IsBlank(Campo_Busca_Entrevista_Presença.Text) || StartsWith('ID Pessoa Texto', Campo_Busca_Entrevista_Presença.Text),
                      !Toggle_Dia.Value || 'Dia Semana' = DiaComPeriodo,
                      !Toggle_Todas_Abertas.Value || 
                      ( 'Ultimo Comparecimento' < Today() || 'Ultimo Comparecimento' >= DateAdd(Today(), 1, TimeUnit.Days) )
                  ),
                  "cr4f5_idpessoa",
                  If(Sort_Presenca, SortOrder.Descending, SortOrder.Ascending)
              )
              */
              /*
              SortByColumns(
                  Filter(
                      Assistências,
                      Finalizada = "Não",
                      IsBlank(Campo_Busca_Entrevista.Text) Or StartsWith('ID Pessoa Texto', Campo_Busca_Entrevista.Text)
                  ),
                  "cr4f5_idpessoa",
                  If(Sort_Entrevista, SortOrder.Descending, SortOrder.Ascending)
              )

              */
            OnSelect: |-
              =Concurrent(
                  Set(AssistenciaSelecionada, ThisItem.'ID Assistência'),
                  Set(PessoaSelecionada, ThisItem.'ID Pessoa')
              );

              If(ThisItem.Finalizada = "Não",
                  Navigate(Controle_Presença, ScreenTransition.None),
                  Navigate(Infos_Entrevista_Dialogo, ScreenTransition.None)
              );
            ShowScrollbar: =false
            TemplateFill: |-
              =If(ThisItem.Finalizada = "Não",
                  RGBA(0, 0, 0, 0),
                  Color.PaleVioletRed
              )
              //RGBA(0; 0; 0; 0)
            Width: =Parent.Width
            Y: =Btn_Le_Qrcode.Y + Btn_Le_Qrcode.Height + 15
          Children:
            - Title2:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Color: |-
                    =If(ThisItem.Finalizada = "Não",
                        RGBA(50, 49, 48, 1),
                        Color.White
                    )
                    //RGBA(50; 49; 48; 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =If(ThisItem.IsSelected, FontWeight.Bold, FontWeight.Normal)
                  Height: =Self.Size * 1.8
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =If(ThisItem.IsSelected, 21, 19)
                  Text: =ThisItem.'ID Pessoa'
                  VerticalAlign: =VerticalAlign.Top
                  Width: =Parent.TemplateWidth - 86
                  X: =16
                  Y: =(Parent.TemplateHeight - (Self.Size * 1.8 + Subtitle2.Size * 1.8)) / 2
            - Subtitle2:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Color: |-
                    =If(ThisItem.Finalizada = "Não",
                        RGBA(50, 49, 48, 1),
                        Color.White
                    )
                  Font: =Font.'Open Sans'
                  FontWeight: =If(ThisItem.IsSelected, FontWeight.Bold, FontWeight.Normal)
                  Height: =Self.Size * 1.8
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =If(ThisItem.IsSelected, 21, 19)
                  Text: =Concatenate(Text(ThisItem.'Data Entrevista', "dd-mmm-yyyy", "pt-br"),"  -  ",Proper(Text(ThisItem.'Data Entrevista',"ddd")))
                  VerticalAlign: =VerticalAlign.Top
                  Width: =Title2.Width
                  X: =Title2.X
                  Y: =Title2.Y + Title2.Height
            - NextArrow2:
                Control: Classic/Icon@2.5.0
                Properties:
                  AccessibleLabel: =Self.Tooltip
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Color: =RGBA(166, 166, 166, 1)
                  Height: =50
                  Icon: =Icon.ChevronRight
                  OnSelect: =Select(Parent)
                  PaddingBottom: =16
                  PaddingLeft: =16
                  PaddingRight: =16
                  PaddingTop: =16
                  Tooltip: ="Exibir detalhes do item"
                  Width: =50
                  X: =Parent.TemplateWidth - Self.Width - 12
                  Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
            - Separator2:
                Control: Rectangle@2.3.0
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Fill: =RGBA(255, 255, 255, 1)
                  Height: =8
                  OnSelect: =Select(Parent)
                  Width: =Parent.TemplateWidth
                  Y: =Parent.TemplateHeight - Self.Height
            - Rectangle8:
                Control: Rectangle@2.3.0
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Fill: =RGBA(0, 89, 178, 1)
                  Height: =Parent.TemplateHeight - Separator2.Height
                  OnSelect: =Select(Parent)
                  Visible: =ThisItem.IsSelected
                  Width: =4
      - LblAppName1:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 0, 0, 1)
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.'Open Sans'
            Height: =88
            Size: =27
            Text: ="Busca Assistência"
            Width: =369
            Wrap: =false
            X: =87
      - Icone_Refresh_Presencas:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            Height: =88
            Icon: =Icon.Reload
            OnSelect: =Refresh(Assistências)
            PaddingBottom: =22
            PaddingLeft: =22
            PaddingRight: =22
            PaddingTop: =22
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: ="Atualizar lista"
            Width: =88
            X: =Parent.Width - IconNewItem1.Width - Icone_Sort_Presenca.Width - Self.Width
      - Icone_Sort_Presenca:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            Height: =88
            Icon: =Icon.Sort
            OnSelect: |-
              =UpdateContext({Sort_Presenca: !Sort_Presenca})
            PaddingBottom: =26
            PaddingLeft: =26
            PaddingRight: =26
            PaddingTop: =26
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: =If(Sort_Presenca, "Classificar lista em ordem alfabética inversa", "Classificar lista em ordem alfabética")
            Width: =88
            X: =Parent.Width - IconNewItem1.Width - Self.Width
      - IconNewItem1:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            Height: =88
            Icon: =Icon.Add
            PaddingBottom: =24
            PaddingLeft: =24
            PaddingRight: =24
            PaddingTop: =24
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: ="Criar novo item"
            Visible: =false
            Width: =88
            X: =Parent.Width - Self.Width
      - Campo_Busca_Entrevista_Presença:
          Control: Classic/TextInput@2.3.2
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Default: =""
            Font: =Font.'Open Sans'
            Format: =TextFormat.Number
            Height: =68
            HintText: ="Somente número do assistido"
            HoverBorderColor: =RGBA(0, 89, 178, 1)
            HoverFill: =RGBA(153, 205, 255, 1)
            PaddingLeft: =70
            Width: =Parent.Width
            Y: =RectQuickActionBar1.Height
      - SearchIcon1:
          Control: Classic/Icon@2.5.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(0, 89, 178, 1)
            Height: =Self.Width
            Icon: =Icon.Search
            PaddingBottom: =14
            PaddingLeft: =14
            PaddingRight: =14
            PaddingTop: =14
            Tooltip: ="Pesquisar"
            Width: =Campo_Busca_Entrevista_Presença.Height
            X: =Campo_Busca_Entrevista_Presença.X
            Y: =Campo_Busca_Entrevista_Presença.Y
      - Rectangle11:
          Control: Rectangle@2.3.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Fill: =RGBA(0, 89, 178, 1)
            Height: =2
            Width: =Parent.Width
            Y: =Campo_Busca_Entrevista_Presença.Y + Campo_Busca_Entrevista_Presença.Height
      - Icon1:
          Control: Classic/Icon@2.5.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            Height: =88
            Icon: =Icon.BackArrow
            OnSelect: =Navigate(Principal, ScreenTransition.CoverRight)
            PaddingBottom: =24
            PaddingLeft: '=24  '
            PaddingRight: =24
            PaddingTop: =24
            PressedFill: =RGBA(255, 255, 255, 0.3)
            Width: =88
      - Btn_Le_Qrcode:
          Control: Button@0.0.45
          Properties:
            Align: =Align.Center
            BasePaletteColor: =RGBA(5, 102, 178, 1)
            BorderRadius: =10
            Font: =Font.'Open Sans'
            FontSize: =27
            Height: =80
            IconStyle: ='ButtonCanvas.IconStyle'.Filled
            Text: ="QR CODE"
            Visible: =false
            Width: =250
            X: =(Parent.Width - Self.Width)/2
            Y: =Campo_Busca_Entrevista_Presença.Y + Campo_Busca_Entrevista_Presença.Height + 10
