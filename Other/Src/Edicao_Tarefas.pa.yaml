# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Edicao_Tarefas:
    Properties:
      Fill: =RGBA(232, 232, 232, 1)
      LoadingSpinnerColor: =RGBA(0, 51, 102, 1)
      OnVisible: =true
    Children:
      - GaleriaTarefas:
          Control: Gallery@2.15.0
          Variant: BrowseLayout_Vertical_ThreeTextVariant_ver5.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            BorderThickness: =2
            Height: =353
            Items: |+
              =//CustomGallerySample
              AddColumns(
                  Filter(Alocações,
                  Aloc_Pessoa = PessoaSelecionada
                  ),
                  //Ceov_Sistema_Alocações;
                  Tarefeiro, LookUp(Pessoas, 'ID Pessoa' = Aloc_Pessoa).'Nome Pessoa',
                  Tarefa, LookUp(Tarefas, 'Codigo Tarefa' = Aloc_Tarefa).'Nome Tarefa'
                  //'Dia da Semana'; LookUp(Ceov_Sistema_DiasdaSemana; ID_DiadaSemana = DiaID).DiadaSemana;
                  //Periodo; LookUp(Ceov_Sistema_PeridodoDia; ID_Periodo = PeriodoID).Nome_Periodo
              )
            OnSelect: |-
              =//false
              Set(TarefaSelecionada, ThisItem.Aloc_Tarefa);
              Set(DiadaSemanaSelecionado, ThisItem.Aloc_Dia);
              Set(PeriodoSelecionado, ThisItem.Aloc_Período);
              Set(AlocacaoSelecionada, ThisItem.Aloc_ID)
            TemplateSize: =50
            Width: =Parent.Width
            Y: =1030
          Children:
            - Title9:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Color: =RGBA(50, 49, 48, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =If(ThisItem.IsSelected, FontWeight.Bold, FontWeight.Normal)
                  Height: =Self.Size * 1.8
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =16
                  Text: =ThisItem.Tarefa
                  VerticalAlign: =VerticalAlign.Top
                  Width: =(Parent.TemplateWidth - NextArrow6.Width - 12)/2 //Parent.TemplateWidth - 86
                  X: =16
                  Y: =5 //(Parent.TemplateHeight - (Self.Size*1,8 + Subtitle9.Size*1,8 + 2 + Body2.Size*1,8)) / 2
            - Subtitle9:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =If(ThisItem.IsSelected, FontWeight.Bold, FontWeight.Normal)
                  Height: =Self.Size * 1.8
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =16
                  Text: =ThisItem.Aloc_Dia
                  VerticalAlign: =VerticalAlign.Top
                  Width: =Title9.Width/2 //(Parent.TemplateWidth - NextArrow6.Width)/4 //
                  X: =Title9.X + Title9.Width
                  Y: =Title9.Y //+ Title9.Height+10
            - Body2:
                Control: Label@2.5.1
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Font: =Font.'Open Sans'
                  FontWeight: =If(ThisItem.IsSelected, FontWeight.Bold, FontWeight.Normal)
                  Height: =Self.Size * 1.8
                  OnSelect: =Select(Parent)
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Size: =16
                  Text: =ThisItem.Aloc_Período
                  VerticalAlign: =VerticalAlign.Top
                  Width: =Title9.Width/2 //Parent.TemplateWidth/4 //Title9.Width
                  X: =Subtitle9.X + Subtitle9.Width //Title9.X
                  Y: =Subtitle9.Y// + Subtitle9.Height
            - NextArrow6:
                Control: Classic/Icon@2.5.0
                Properties:
                  AccessibleLabel: =Self.Tooltip
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Color: =RGBA(166, 166, 166, 1)
                  Height: =50
                  Icon: =Icon.Edit
                  OnSelect: =Select(Parent)
                  PaddingBottom: =16
                  PaddingLeft: =16
                  PaddingRight: =16
                  PaddingTop: =16
                  Tooltip: ="Exibir detalhes do item"
                  Width: =50
                  X: =Parent.TemplateWidth - Self.Width - 12
                  Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
            - Separator11:
                Control: Rectangle@2.3.0
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Fill: =RGBA(255, 255, 255, 1)
                  Height: =8
                  OnSelect: =Select(Parent)
                  Width: =Parent.TemplateWidth
                  Y: =Parent.TemplateHeight - Self.Height
            - Rectangle3:
                Control: Rectangle@2.3.0
                Properties:
                  BorderColor: =RGBA(0, 89, 178, 1)
                  Fill: =RGBA(0, 89, 178, 1)
                  Height: =Parent.TemplateHeight - Separator11.Height
                  OnSelect: =Select(Parent)
                  Visible: =ThisItem.IsSelected
                  Width: =4
      - RectQuickActionBar3_11:
          Control: Rectangle@2.3.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Fill: =RGBA(0, 51, 102, 1)
            Height: =88
            Width: =Parent.Width
      - Icone_Cancela_Edicao_Tarefas:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            Height: =88
            Icon: =Icon.BackArrow
            OnSelect: |-
              =//ResetForm(Form_Edita_Entrevista_1);;Back()
              Patch(
                  Logs,
                  Defaults(Logs),
                  {
                      DataeHora: Now(),
                      DeviceID: DeviceID,
                      Ação: $"Voltando da Edição Atividades Tarefeiro ID: {PessoaSelecionada}"
                  }
              );
              Back()
            PaddingBottom: =22
            PaddingLeft: =22
            PaddingRight: =22
            PaddingTop: =22
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: ="Cancel item"
            Width: =88
      - Icone_Salva_Tarefas:
          Control: Classic/Icon@2.5.0
          Properties:
            AccessibleLabel: =Self.Tooltip
            BorderColor: =RGBA(0, 89, 178, 1)
            Color: =RGBA(255, 255, 255, 1)
            Height: =88
            Icon: =Icon.Save
            OnSelect: =Back();
            PaddingBottom: =22
            PaddingLeft: =22
            PaddingRight: =22
            PaddingTop: =22
            PressedFill: =RGBA(255, 255, 255, 0.3)
            TabIndex: =0
            Tooltip: ="Submit item"
            Visible: =false
            Width: =88
            X: =Parent.Width - Self.Width
      - Lbl_Titulo_Edita_Entrevista_1:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 0, 0, 1)
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(58, 58, 58, 0)
            Font: =Font.'Open Sans'
            Height: =88
            Size: =27
            Text: ="Edita Tarefas"
            Width: =Parent.Width - Icone_Cancela_Edicao_Tarefas.Width - Icone_Salva_Tarefas.Width
            Wrap: =false
            X: =80
      - Dropdown_Dia_da_Semana:
          Control: Classic/DropDown@2.3.1
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            ChevronBackground: =RGBA(0, 51, 102, 1)
            ChevronFill: =RGBA(255, 255, 255, 1)
            ChevronHoverBackground: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            ChevronHoverFill: =RGBA(255, 255, 255, 1)
            Default: |-
              =DiadaSemanaSelecionado
               //LookUp(Ceov_Sistema_DiasdaSemana; ID_DiadaSemana = DiadaSemanaSelecionado).DiadaSemana//"1"
            Font: =Font.'Open Sans'
            HoverFill: =RGBA(153, 205, 255, 1)
            Items: |+
              =["Domingo", "Segunda", "Terça", "Quarta", "Quinta", "Sexta", "Sábado"]
            Items.Value: =Value
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(0, 89, 178, 1)
            SelectionColor: =RGBA(255, 255, 255, 1)
            SelectionFill: =RGBA(0, 51, 102, 1)
            Width: =Parent.Width/3
            X: =App.MinScreenWidth/4 - Self.Width/2
            Y: =Dropdown_Tarefa.Y + Dropdown_Tarefa.Height*1.5
      - Dropdown_Tarefa:
          Control: Classic/DropDown@2.3.1
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            ChevronBackground: =RGBA(0, 51, 102, 1)
            ChevronFill: =RGBA(255, 255, 255, 1)
            ChevronHoverBackground: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            ChevronHoverFill: =RGBA(255, 255, 255, 1)
            Default: =LookUp(Tarefas, 'Codigo Tarefa' = TarefaSelecionada).'Nome Tarefa' //"1"
            Font: =Font.'Open Sans'
            HoverFill: =RGBA(153, 205, 255, 1)
            Items: =Tarefas
            Items.Value: =cr4f5_nometarefa
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(0, 89, 178, 1)
            SelectionColor: =RGBA(255, 255, 255, 1)
            SelectionFill: =RGBA(0, 51, 102, 1)
            Width: =(App.MinScreenWidth/3)*2
            X: =(App.MinScreenWidth - Self.Width)/2
            Y: =349
      - Dropdown_Periodo:
          Control: Classic/DropDown@2.3.1
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            ChevronBackground: =RGBA(0, 51, 102, 1)
            ChevronFill: =RGBA(255, 255, 255, 1)
            ChevronHoverBackground: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            ChevronHoverFill: =RGBA(255, 255, 255, 1)
            Default: =PeriodoSelecionado
            Font: =Font.'Open Sans'
            HoverFill: =RGBA(153, 205, 255, 1)
            Items: =["Manhã","Tarde","Noite"]
            Items.Value: =Value
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(0, 89, 178, 1)
            SelectionColor: =RGBA(255, 255, 255, 1)
            SelectionFill: =RGBA(0, 51, 102, 1)
            Width: =Parent.Width/3
            X: =(App.MinScreenWidth/4)*3 - Self.Width/2
            Y: =Dropdown_Dia_da_Semana.Y
      - Rectangle2:
          Control: Rectangle@2.3.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            BorderThickness: =2
            Fill: =RGBA(209, 209, 209, 1)
            Height: =lbl_Tarefa.Height
            Width: =Parent.Width
            Y: =lbl_Tarefa.Y
      - lbl_Tarefa:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =50
            Size: =16
            Text: ="Tarefa"
            Width: =102
            X: =Title9.X
            Y: =980
      - Lbl_DiadaSemana:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =50
            Size: =16
            Text: ="Dia da Semana"
            Width: =195
            X: =Subtitle9.X - 10
            Y: =lbl_Tarefa.Y
      - Lbl_Periodo:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =50
            Size: =16
            Text: ="Período"
            Width: =195
            X: =Body2.X
            Y: =lbl_Tarefa.Y
      - Btn_Atualizar_Tarefas:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(0, 51, 102, 1)
            Font: =Font.'Open Sans'
            Height: =85
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            OnSelect: |-
              =Patch(
                      Alocações,
                      LookUp(Alocações, Aloc_ID = AlocacaoSelecionada),
                      {
                          //PessoaID: DropdownPessoa.Selected.ID_Pessoa;
                          Aloc_Pessoa: PessoaSelecionada,
                          Aloc_Tarefa: Dropdown_Tarefa.Selected.'Codigo Tarefa',
                          Aloc_Dia: Dropdown_Dia_da_Semana.Selected.Value,
                          Aloc_Período:Dropdown_Periodo.Selected.Value
                      }
              );

              Patch(
                  Logs,
                  Defaults(Logs),
                  {
                      DataeHora: Now(),
                      DeviceID: DeviceID,
                      Ação: $"Atualizando Atividades Tarefeiro ID: {PessoaSelecionada}"
                  }
              );
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="Atualizar"
            X: =App.MinScreenWidth/4 - Self.Width/2
            Y: =673
      - Btn_Inserir_Tarefas:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(0, 51, 102, 1)
            Font: =Font.'Open Sans'
            Height: =85
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            OnSelect: |+
              =Set(UltimoID, Max(FirstN(Alocações, 100), Aloc_ID));

              Patch(
                      Alocações,
                      Defaults(Alocações),
                      {
                          Aloc_ID: UltimoID + 1,
                          Aloc_Pessoa: PessoaSelecionada,
                          Aloc_Tarefa: Dropdown_Tarefa.Selected.'Codigo Tarefa',
                          Aloc_Dia: Dropdown_Dia_da_Semana.Selected.Value,
                          Aloc_Período:Dropdown_Periodo.Selected.Value
                      }
              );

              Patch(
                  Logs,
                  Defaults(Logs),
                  {
                      DataeHora: Now(),
                      DeviceID: DeviceID,
                      Ação: $"Inserindo Nova Atividade: {Dropdown_Tarefa.Selected.'Nome Tarefa'} - {Dropdown_Dia_da_Semana.Selected.Value} p/ tarefeiro ID: {PessoaSelecionada}"
                  }
              );
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="Inserir"
            X: =(App.MinScreenWidth/4)*3 - Self.Width/2
            Y: =673
      - Btn_Apagar_Tarefas:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(0, 51, 102, 1)
            Font: =Font.'Open Sans'
            Height: =85
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
            OnSelect: |-
              =RemoveIf(Alocações, Aloc_ID = AlocacaoSelecionada);

              Patch(
                  Logs,
                  Defaults(Logs),
                  {
                      DataeHora: Now(),
                      DeviceID: DeviceID,
                      Ação: $"Apagando Atividade Tarefeiro ID:{PessoaSelecionada}"
                  }
              );
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            Text: ="Apagar"
            X: =(App.MinScreenWidth - Self.Width)/2
            Y: =781
      - SelecaoEspiritualVoluntario:
          Control: Classic/Toggle@2.1.0
          Properties:
            BorderColor: =RGBA(0, 89, 178, 1)
            FalseText: ="Voluntário"
            Font: =Font.'Open Sans'
            Height: =40
            TrueFill: =RGBA(0, 51, 102, 1)
            TrueText: ="Espiritual"
            Width: =226
            X: =(App.MinScreenWidth - Self.Width)/2
            Y: =260
      - lbl_Nome_Tarefeiro:
          Control: Label@2.5.1
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 89, 178, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Size: =24
            Text: =LookUp(Pessoas, 'ID Pessoa' = PessoaSelecionada).'Nome Pessoa' //
            Width: =400
            X: =(Parent.Width - Self.Width) / 2
            Y: =RectQuickActionBar3_11.Height + 20
