"Manutenção As screen.'phoneDetailViewLayout_ver3.0'":
    Fill: =RGBA(232, 232, 232, 1)
    OnVisible: |-
        =//Set(Hora;Int(Text(Now();"hh")));;
        //Set(DiaSemana;
        //   Switch(
        //       Weekday(Now());
        //       1; "Domingo";
        //       2; "Segunda";
        //       3; "Terça";
        //       4; "Quarta";
        //       5; "Quinta";
        //       6; "Sexta";
        //       7; "Sabado"
        //    )
        //);;
        //Set(Periodo;
        //    If(Hora<12;"Manhã";
        //        If(Hora<18;"Tarde";"Noite")
        //    )
        //);;
        //Set(DiaComPeriodo;Concatenate(DiaSemana;"_";Periodo));;
        
        //Define tolerancia de semanas que pode faltar na assistência:
        //Set(tolerancia;2);;
        
        //Zera variaveis dos popup
        //Set(PopupApagaAssistido; false);;
        //Set(PopupApagaEntrevista; false);;
        //Set(PopupApagaTarefeiro; false);;
        //Set(PopupApagaTodos; false);;
        //Set(PopupConfirmaPresenca; false);;
        //Set(PopupInformaNumero; false);;
        Set(DialogoRealizado, false);

    Lbl_Titulo_2 As label:
        Align: =Align.Center
        BorderColor: =RGBA(0, 89, 178, 1)
        Color: =RGBA(241, 244, 249, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        Fill: =RGBA(0, 18, 107, 1)
        Font: =Font.'Lato Light'
        FontWeight: =FontWeight.Bold
        Height: =88
        Italic: =true
        Size: =35
        Text: ="MANUTENÇÃO"
        Width: =Parent.Width
        ZIndex: =11

    Lbl_Usuario_Logado_2 As label:
        BorderColor: =RGBA(0, 89, 178, 1)
        Color: =RGBA(241, 244, 249, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        Fill: =RGBA(0, 18, 107, 1)
        FontWeight: =FontWeight.Bold
        Height: =88
        Italic: =true
        Size: =28
        Text: =Concatenate("   ",Usuario_Logado," - ",Perfil_Logado)
        Width: =Parent.Width
        Y: =Parent.Height-Self.Height
        ZIndex: =14

    Btn_Busca_Entrevistas_Duplicadas As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 51, 102, 1)
        FontWeight: =FontWeight.Semibold
        Height: =85
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
        OnSelect: |+
            =Set(UltimoCadastro, Max(Assistências,'ID Pessoa'));
            
            ClearCollect(
                MinhaColecaoDuplicada,
                ForAll(
                    Sequence(UltimoCadastro),
                    {
                        Valor: Value,
                        Duplicatas: Filter(
                            Assistências,
                                'ID Pessoa' = Value)
                    }
                )
            );
            
            ClearCollect(
                ValoresDuplicados,
                Filter(
                    MinhaColecaoDuplicada,
                    CountRows(Duplicatas) > 1
                )
            );
            
        Size: =24
        Text: ="Entrevistas Duplicadas"
        Width: =280
        Y: =585
        ZIndex: =22

    DataTable_Entrevistas_Duplicadas As dataTable.datatable:
        BorderColor: =RGBA(0, 89, 178, 1)
        BorderStyle: =BorderStyle.Solid
        Color: =RGBA(0, 0, 0, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisplayMode: =DisplayMode.Edit
        Fill: =RGBA(0, 0, 0, 0)
        Font: =Font.'Open Sans'
        FontWeight: =FontWeight.Normal
        HeadingColor: =RGBA(255, 255, 255, 1)
        HeadingFill: =RGBA(0, 51, 102, 1)
        HeadingFont: =Font.'Open Sans'
        HeadingFontWeight: =FontWeight.Normal
        HeadingSize: =21
        Height: =347
        HoverColor: =RGBA(0, 0, 0, 1)
        HoverFill: =RGBA(153, 205, 255, .2)
        InputFill: =RGBA(255, 255, 255, 1)
        InvertedColor: =RGBA(255, 255, 255, 1)
        Items: =ValoresDuplicados
        LinkColor: =RGBA(0, 134, 208, 1)
        PrimaryColor1: =RGBA(0, 51, 102, 1)
        PrimaryColor2: =RGBA(0, 89, 178, 1)
        PrimaryColor3: =RGBA(153, 205, 255, 1)
        SelectedColor: =RGBA(0, 0, 0, 1)
        SelectedFill: =RGBA(0, 51, 102, .2)
        Size: =21
        Visible: =true
        Width: =280
        X: =0
        Y: =680
        ZIndex: =25

        Valor_Coluna1_1 As dataTableColumn.textualColumn:
            AutoWidth: =false
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Valor"
            FieldName: ="Valor"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =2
            Text: =ThisItem.Valor
            Visible: =true
            Width: =279
            X: =2
            Y: =0
            ZIndex: =2

    Icone_Voltar_Assistidos_1 As icon.ChevronLeft:
        AccessibleLabel: =Self.Tooltip
        BorderColor: =RGBA(0, 89, 178, 1)
        Color: =RGBA(255, 255, 255, 1)
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(244, 244, 244, 1)
        Height: =88
        Icon: =Icon.ChevronLeft
        OnSelect: =Navigate(Principal, ScreenTransition.CoverRight)
        PaddingBottom: =24
        PaddingLeft: =24
        PaddingRight: =24
        PaddingTop: =24
        PressedFill: =RGBA(255, 255, 255, 0.3)
        TabIndex: =0
        Tooltip: ="Back to list"
        Width: =88
        ZIndex: =32

    DataTable1 As dataTable.datatable:
        BorderColor: =RGBA(0, 89, 178, 1)
        BorderStyle: =BorderStyle.Solid
        Color: =RGBA(0, 0, 0, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisplayMode: =DisplayMode.Edit
        Fill: =RGBA(0, 0, 0, 0)
        Font: =Font.'Open Sans'
        FontWeight: =FontWeight.Normal
        HeadingColor: =RGBA(255, 255, 255, 1)
        HeadingFill: =RGBA(0, 51, 102, 1)
        HeadingFont: =Font.'Open Sans'
        HeadingFontWeight: =FontWeight.Normal
        HeadingSize: =21
        Height: =313
        HoverColor: =RGBA(0, 0, 0, 1)
        HoverFill: =RGBA(153, 205, 255, .2)
        InputFill: =RGBA(255, 255, 255, 1)
        InvertedColor: =RGBA(255, 255, 255, 1)
        Items: =Logs
        LinkColor: =RGBA(0, 134, 208, 1)
        PrimaryColor1: =RGBA(0, 51, 102, 1)
        PrimaryColor2: =RGBA(0, 89, 178, 1)
        PrimaryColor3: =RGBA(153, 205, 255, 1)
        SelectedColor: =RGBA(0, 0, 0, 1)
        SelectedFill: =RGBA(0, 51, 102, .2)
        Size: =15
        Width: =App.MinScreenWidth
        X: =0
        Y: =1043
        ZIndex: =33

        DataeHora_Coluna2 As dataTableColumn.textualColumn:
            AutoWidth: =false
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="DataeHora"
            FieldName: ="cre47_dataehora"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =3
            Text: =ThisItem.DataeHora
            Width: =183
            X: =0
            Y: =0
            ZIndex: =1

        Ação_Coluna1 As dataTableColumn.textualColumn:
            AutoWidth: =false
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Ação"
            FieldName: ="cre47_acao"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =5
            Text: =ThisItem.Ação
            Width: =354
            X: =0
            Y: =0
            ZIndex: =7

        DeviceID_Coluna1 As dataTableColumn.textualColumn:
            AutoWidth: =false
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="DeviceID"
            FieldName: ="cre47_deviceid"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =4
            Text: =ThisItem.DeviceID
            Width: =145
            X: =0
            Y: =0
            ZIndex: =8

    Btn_1 As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 51, 102, 1)
        FontWeight: =FontWeight.Semibold
        Height: =85
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
        OnSelect: |
            =//------------------------------------------------------------------------------------------
            // Copia os registros com 'Data Diálogo' preenchida para Assistências_Encerradas
            ForAll(
                Filter(Assistências, !IsBlank('Data Diálogo')),
                Patch(
                    Assistências_Encerradas,
                    Defaults(Assistências_Encerradas),
                    {
                        'ID Assistência': ThisRecord.'ID Assistência',
                        'ID Pessoa': ThisRecord.'ID Pessoa',
                        'ID Pessoa Texto': ThisRecord.'ID Pessoa Texto',
                        'Data Entrevista': ThisRecord.'Data Entrevista',
                        Entrevistador: ThisRecord.Entrevistador,
                        'Dia Semana': ThisRecord.'Dia Semana',
                        'Primeira Assistência': ThisRecord.'Primeira Assistência',
                        Assistência: ThisRecord.'Assistência (cr4f5_assistencia)',
                        'Tratamento Médico': ThisRecord.'Tratamento Médico',
                        'Anotações Entrevista': Left(ThisRecord.'Anotações Entrevista', 100), // Trunca para 100 caracteres
                        'Assistência Mesmo Dia': ThisRecord.'Assistência Mesmo Dia',
                        'Semana 1': ThisRecord.'Semana 1',
                        'Semana 2': ThisRecord.'Semana 2',
                        'Semana 3': ThisRecord.'Semana 3',
                        'Semana 4': ThisRecord.'Semana 4',
                        Extra: ThisRecord.Extra,
                        Finalizada: ThisRecord.Finalizada,
                        'Data Diálogo': ThisRecord.'Data Diálogo',
                        Dialogador: ThisRecord.Dialogador,
                        'Anotações Diálogo': Left(ThisRecord.'Anotações Diálogo', 100), // Trunca para 100 caracteres
                        'Continua Tratamento': ThisRecord.'Continua Tratamento',
                        Abandonou: "Não",
                        'Ultimo Comparecimento': ThisRecord.'Ultimo Comparecimento',
                        'Entrevista Nova': ThisRecord.'Entrevista Nova'
                    }
                )
            );
            //------------------------------------------------------------------------------------------
            
            //------------------------------------------------------------------------------------------
            // Remove os registros errados da tabela original
            RemoveIf(Assistências, !IsBlank('Data Diálogo'));
            //------------------------------------------------------------------------------------------
        Size: =24
        Text: ="Move Finalizadas"
        Width: =280
        X: =20
        Y: =156
        ZIndex: =34

    Btn_Busca_Entrevistas_Duplicadas_2 As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 51, 102, 1)
        FontWeight: =FontWeight.Semibold
        Height: =85
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
        OnSelect: =
        Size: =24
        Text: ="Copia Entrevistas"
        Width: =280
        X: =104
        Y: =454
        ZIndex: =35

    Button2 As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 51, 102, 1)
        FontWeight: =FontWeight.Semibold
        Height: =70
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
        OnSelect: |-
            =//RemoveIf(Assistências; true);;
            //RemoveIf(Assistências_Encerradas; true);;
            //RemoveIf(Pessoas; true);;
            //RemoveIf(Presenças; true);;
            //RemoveIf(Excedentes; true);;
            //RemoveIf(Logs; true);;
        Size: =24
        Text: ="Apaga Todas Tabelas"
        Width: =280
        X: =400
        Y: =454
        ZIndex: =36

    Btn_2 As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 51, 102, 1)
        FontWeight: =FontWeight.Semibold
        Height: =85
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
        OnSelect: =
        Size: =24
        Text: ="Ultimo Comp."
        Width: =280
        X: =20
        Y: =285
        ZIndex: =37

    Btn_Busca_Entrevistas_Duplicadas_3 As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 51, 102, 1)
        FontWeight: =FontWeight.Semibold
        Height: =85
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
        OnSelect: |-
            =UpdateIf(
                Assistências,
                IsBlank(Abandonou) || Abandonou = "",
                {
                    Abandonou: "Não"
                }
            )
        Size: =24
        Text: ="Abandonou"
        Width: =280
        X: =400
        Y: =156
        ZIndex: =38

    Btn_Busca_Entrevistas_Duplicadas_1 As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 51, 102, 1)
        FontWeight: =FontWeight.Semibold
        Height: =85
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
        OnSelect: |
            =ClearCollect(
                EntrevistaNoMesmoDia,
                Filter(
                    Assistências_Encerradas,
                    DateValue('Data Entrevista') = DateValue('Data de Criação')
                )
            );
            ClearCollect(
                PessoasMesmaData,
                Distinct(EntrevistaNoMesmoDia, 'ID Pessoa')
            )
        Size: =24
        Text: ="Assistencias Duplicadas"
        Width: =280
        X: =373
        Y: =585
        ZIndex: =39

    DataTable_Entrevistas_Duplicadas_1 As dataTable.datatable:
        BorderColor: =RGBA(0, 89, 178, 1)
        BorderStyle: =BorderStyle.Solid
        BorderThickness: =0
        Color: =RGBA(0, 0, 0, 1)
        ContentLanguage: =""
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisplayMode: =DisplayMode.Edit
        Fill: =RGBA(0, 0, 0, 0)
        Font: =Font.'Open Sans'
        FontWeight: =FontWeight.Normal
        HeadingColor: =RGBA(255, 255, 255, 1)
        HeadingFill: =RGBA(0, 51, 102, 1)
        HeadingFont: =Font.'Open Sans'
        HeadingFontWeight: =FontWeight.Normal
        HeadingSize: =21
        Height: =347
        HoverColor: =RGBA(0, 0, 0, 1)
        HoverFill: =RGBA(153, 205, 255, .2)
        InputFill: =RGBA(255, 255, 255, 1)
        InvertedColor: =App.Theme.Colors.PrimaryForeground
        Items: =PessoasMesmaData
        LinkColor: =App.Theme.Colors.Lighter10
        maximumHeight: =11360
        maximumWidth: =640
        minimumHeight: =20
        minimumWidth: =20
        NoDataText: ="Não foi possível localizar dados para mostrar no momento"
        PrimaryColor1: =App.Theme.Colors.Primary
        PrimaryColor2: =App.Theme.Colors.Darker30
        PrimaryColor3: =App.Theme.Colors.Lighter70
        SelectedColor: =RGBA(0, 0, 0, 1)
        SelectedFill: =RGBA(0, 51, 102, .2)
        Size: =21
        UsePhoneLayout: =1
        Visible: =true
        Width: =280
        X: =373
        Y: =680
        ZIndex: =40

        Value_Column1 As dataTableColumn.textualColumn:
            DisplayMode: =DisplayMode.Edit
            FieldDisplayName: ="Value"
            FieldName: ="Value"
            FieldVariantName: ="textualColumn"
            Height: =Parent.Height
            LayoutHeight: =Parent.Height
            Order: =1
            Text: =ThisItem.Value
            Width: =100
            X: =0
            Y: =0
            ZIndex: =9

    Btn_3 As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Fill: =RGBA(0, 51, 102, 1)
        FontWeight: =FontWeight.Semibold
        Height: =85
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(0, 51, 102, 1), -20%)
        OnSelect: =
        Size: =24
        Text: ="Ultimo Comp."
        Width: =280
        X: =400
        Y: =285
        ZIndex: =41

